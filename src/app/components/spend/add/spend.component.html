<mat-tab-group
  [selectedIndex]="selected.value"
  (selectedIndexChange)="tabChanged($event)"
  backgroundColor="primary">

  <mat-tab *ngFor="let tab of tabs; let index = index">
    <ng-template mat-tab-label>
      <mat-icon>{{tab.icon}}</mat-icon>　{{tab.label}}
    </ng-template>
    <div class="spend-container">
      <form [formGroup]="spendForm">
        <mat-vertical-stepper
          #linearVerticalStepper="matVerticalStepper"
          formArrayName="spendArray"
          class="mat-elevation-z4"
          linear>
          <mat-step
            label="カテゴリー"
            formGroupName="0"
            [stepControl]="spendArray.get([0])">
            <mat-radio-group class="radio-group" formControlName="category">
              <mat-radio-button
                class="radio-button"
                *ngFor="let category of categories"
                [value]="category.value"
                (click)="nextStep(linearVerticalStepper)">
                {{ category.viewValue }}
              </mat-radio-button>
            </mat-radio-group>
            <p>
              <button
                mat-stroked-button
                color="primary"
                matStepperNext
                type="button"
                [disabled]="spendArray.get([0]).invalid"> Next </button>
            </p>
          </mat-step>
          <mat-step
            label="支出情報"
            formGroupName="1"
            [stepControl]="spendArray.get([1])">
            <mat-form-field appearance="outline">
              <mat-label><mat-icon>date_range</mat-icon> 日付 </mat-label>
              <input
                matInput
                [matDatepicker]="date"
                formControlName="date"
                placeholder="日付を選択してください"
                readonly>
              <mat-datepicker-toggle matSuffix [for]="date"></mat-datepicker-toggle>
              <mat-datepicker touchUi #date></mat-datepicker>
              <mat-error> 日付を選択してください </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label><mat-icon>attach_money</mat-icon> 金額 </mat-label>
              <input
                matInput
                type="number"
                formControlName="amount"
                class="textAlignRight"
                placeholder="金額を入力してください">
              <mat-error>
                <strong>数字のみ</strong>(1~9999999) 入力してください
              </mat-error>
            </mat-form-field>
            <mat-form-field>
              <mat-label><mat-icon>create</mat-icon> メモ </mat-label>
              <textarea
                matInput
                formControlName="memo"
                placeholder="メモを入力してください">
              </textarea>
            </mat-form-field>
            <p>
              <button
                type="submit"
                (click)="save(spendForm.value)"
                class="btn btn-default"
                mat-raised-button
                color="primary"
                [disabled]="spendArray.get([0]).invalid || spendArray.get([1]).invalid">
                Save
              </button>
              <button mat-button matStepperPrevious type="button">Back</button>
            </p>
          </mat-step>
        </mat-vertical-stepper>
      </form>
    </div>
  </mat-tab>
</mat-tab-group>
